<html>
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <h1>Flask-SSE Quickstart</h1>
  <div id="test1"></div>
  <script>
    // var source = new EventSource("{{ url_for('sse.stream', channel=request.args.get('channel', 'test2')) }}");
    // source.addEventListener('greeting', function(event) {
    //     var data = JSON.parse(event.data);
    //     document.getElementById("test1").innerHTML = "yo son " + data.message;
    //     // alert("The server says " + data.message);
    // }, false);
    // source.addEventListener('error', function(event) {
    //     alert("Failed to connect to event stream. Is Redis running?");
    // }, false);
  </script>
  <script>
    // var source = new EventSource("{{ url_for('sse.stream', channel=request.args.get('channel', 'test')) }}");
    // source.addEventListener('testevent', function(e) {
    //   var data = JSON.parse(e.data);
    //   document.body.innerHTML += "New Message: " + data.message + '<br />';
    // }, false);
  </script>
  <script>
    // var source = new EventSource('/stream');
    // source.onmessage = function (event) {
    //     alert(event.data);
    // };
  </script>

  New messages sent from <a href="{{ url_for('new') }}">this page</a> will appear below<br />
</body>
</html>